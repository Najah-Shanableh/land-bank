<div id="d3div"></div>
<<<<<<< HEAD
<script type="text/javascript">

function d3chart(data, title, marker) {

var margin = { top: 20, right: 20, bottom: 60, left: 60},
    width = 320 - margin.left - margin.right,
    height = 320 - margin.top - margin.bottom;

data = data.sort(function(a,b) { if (a.x > b.x) return 1; if (a.x < b.x) return -1; return 0; });
var xdelta=data[1].x - data[0].x;
var xmax = d3.max(data, function(d) { return d.x; });
var ymax = d3.max(data, function(d) { return d.y; });
var padding = xdelta * 0.1;
var bar_width = xdelta - padding;


var xScale = d3.scale.linear()
    .domain([0, xmax+xdelta/2.0])
    .range([0, width]);

var yScale = d3.scale.linear()
    .domain([0, ymax])
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom")
    .ticks(10)
    .tickFormat(d3.format("3.2f"));

var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left");

var svg = d3.select("#d3div").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis)
    .append("text")
    .attr("y",margin.bottom/2)
    .attr("x",width/2)
    .style("text-anchor", "middle")
    .text(title) ;

svg.append("g")
    .attr("class", "axis")
    .call(yAxis)
    .append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 0-margin.left)
    .attr("x", 0-(height/2))
    .attr("dy", "1em")
    .style("text-anchor", "middle")
    .text("Count");

if (typeof marker !== 'undefined') {
  svg.append("line")
    .attr({ 
      "x1": xScale(marker), "y1": yScale(0),
      "x2": xScale(marker), "y2": yScale(ymax),
      "stroke-width": 3, "stroke": "black"
    });
};

svg.selectAll(".bar")
    .data(data)
    .enter()
    .append("rect")
    .attr("class", "bar")
    .attr("x", function(d) { return xScale(d.x - xdelta/2.0 + padding/2.0)} )
    .attr("width", xScale(bar_width))
    .attr("y", function(d) { return yScale(d.y)} )
    .attr("height", function(d) { return height - yScale(d.y); })
    .attr("fill", function(d) {
	return "rgb(0, 0, "+ Math.round((255*d.y)/
					d3.max(
	$.map(data,function(d){ return d.y; })))  + ")";
    })
    .attr("opacity", "0.4");

};

var chart_data = {{ histData | safe }};
var mydata = chart_data.histData.land_psf;

d3chart(mydata, "Assessed Land Value Per Square Foot", 0.48);
=======
<div id="d3div2"></div>

<script type="text/javascript"
  src="/static/landbank_data/js/d3plots.js">
</script>

<script type="text/javascript">

var chart_data = {{ histData | safe }};
var mydata = chart_data.histData.land_psf;
var myfakedata = [
  { "x": "2012-01-01", "y": 50 },
  { "x": "2011-01-01", "y": 30 },
  { "x": "2011-05-01", "y": 20 },
  { "x": "2010-01-01", "y": 10 }];

d3hist("#d3div", mydata, "Assessed Land Value Per Square Foot", 0.48);
d3timeline("#d3div2", myfakedata, "Fake time series");
>>>>>>> 22bade52bf11ce6073f7e77f5a16608467e6392a

</script>
